<head>
    <!-- Global Site Tag (gtag.js) - Google Analytics  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106423818-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-106423818-1');
</script> -->
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-106423818-1', 'auto');
ga('send', 'pageview');
console.log(ga.q);
</script>
<!-- End Google Analytics 


    <link rel="manifest" href="/manifest.json">
    <!-- data-cfasync: Ignore CloudFlare's Rocket Loader, which may impact the triggering of the DOMContentLoaded event (see: https://goo.gl/CvZewv) -->
    <script data-cfasync="false">
        window.OneSignal = window.OneSignal || [];
        /* In milliseconds, time to wait before prompting user. This time is relative to right after the user presses <ENTER> on the address bar and navigates to your page */
        var notificationPromptDelay = 30000;
        /* Why use .push? See: http://stackoverflow.com/a/38466780/555547 */
        window.OneSignal.push(function() {
            /* Use navigation timing to find out when the page actually loaded instead of using setTimeout() only which can be delayed by script execution */
            var navigationStart = window.performance.timing.navigationStart;
            /* Get current time */
            var timeNow = Date.now();
            /* Prompt the user if enough time has elapsed */
            setTimeout(promptAndSubscribeUser, Math.max(notificationPromptDelay - (timeNow - navigationStart), 0));
        });
        function promptAndSubscribeUser() {
            /* Want to trigger different permission messages? See: https://documentation.onesignal.com/docs/permission-requests#section-onesignal-permission-messages */
            window.OneSignal.isPushNotificationsEnabled(function(isEnabled) {
                if (!isEnabled) {
                    //window.OneSignal.showHttpPrompt();
                    window.OneSignal.registerForPushNotifications();
                }
            });
        }
    </script>
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
    <script>
        var OneSignal = window.OneSignal || [];
        OneSignal.push(["init", {
            appId: "3beb3078-e0f1-4629-af17-fde833b9f716",
            autoRegister: false,
            notifyButton: {
                enable: true /* Set to false to hide */
            },
            welcomeNotification: {
                "title": "My Custom Title",
                "message": "Thanks for subscribing!",
                // "url": "" /* Leave commented for the notification to not open a window on Chrome and Firefox (on Safari, it opens to your webpage) */
            },
            promptOptions: {
                /* actionMessage limited to 90 characters */
                actionMessage: "We'd like to show you notifications for the latest news and updates.",
                /* acceptButtonText limited to 15 characters */
                acceptButtonText: "ALLOW",
                /* cancelButtonText limited to 15 characters */
                cancelButtonText: "NO THANKS"
            },
            notifyButton: {
        enable: true, /* Required to use the notify button */
        size: "large", /* One of "small", "medium", or "large" */
        theme: "inverse", /* One of "default" (red-white) or "inverse" (white-red) */
        position: "bottom-right", /* Either "bottom-left" or "bottom-right" */
        offset: {
            bottom: "30px",
            right: "30px" /* Only applied if bottom-right */
        },
        prenotify: true, /* Show an icon with 1 unread message for first-time site visitors */
        showCredit: false, /* Hide the OneSignal logo */
        text: {
            "tip.state.unsubscribed": "Subscrever notificações bet.pt",
            "tip.state.subscribed": "Notificações ativas",
            "tip.state.blocked": "Notificações bet.pt bloqueadas",
            "message.prenotify": "Clique para subscrever",
            "message.action.subscribed": "Obrigado por subscrever!",
            "message.action.resubscribed": "Obrigado por subscrever",
            "message.action.unsubscribed": "Não irá receber mais notificações",
            "dialog.main.title": "Gerir notificações",
            "dialog.main.button.subscribe": "Subscrever",
            "dialog.main.button.unsubscribe": "Desativar",
            "dialog.blocked.title": "Desbloquear notificações",
            "dialog.blocked.message": "Siga os passos para subscrever:"
        },
        colors: { // Customize the colors of the main button and dialog popup button
                    "circle.background": "rgb(255,75,0)",
                    "circle.foreground": "white",
                    "badge.background": "rgb(255,75,0)",
                    "badge.foreground": "white",
                    "badge.bordercolor": "white",
                    "pulse.color": "white",
                    "dialog.button.background.hovering": "rgb(255,75,0)",
                    "dialog.button.background.active": "rgb(70, 92, 103)",
                    "dialog.button.background": "rgb(255,75,0)",
                    "dialog.button.foreground": "white"
        }
      }
        }]);
        // OneSignal.push(function() {
        //   OneSignal.showHttpPrompt();
        // });
    </script>
</head>


<body>
<h1>OneSignal Example</h1>


<!-- GET NOTIFICATION DATA, SEND TO GA -->
<script>
OneSignal.push(["addListenerForNotificationOpened", function(data) {
    console.log("Received NotificationOpened:");
    console.log(data);
    console.log(data.id);
    console.log(data.heading);
    OneSignal.getUserId( function(userId) {
            console.log("OneSignal User ID:", userId);
            // Make a POST call to your server with the notification data and userId
            ga('send', 'event', 'Notification_Clicked', data.id, userId);
        });
}]);
</script>



<!-- GET ONESIGNAL USERID -->
<script>
OneSignal.push(function() {
    // Occurs when the user's subscription changes to a new value.
    OneSignal.on('subscriptionChange', function (isSubscribed) {
        console.log("The user's subscription status has change, isSubscribed:", isSubscribed);
        OneSignal.getUserId( function(userId) {
            console.log("OneSignal User ID:", userId);
            // Make a POST call to your server with the user ID
            ga('send', 'event', 'isUserSubscribed', isSubscribed, userId);
        });
    });
});
</script>









<!-- Track Users on button click -->
    <p><button onclick="geoFindMe()">Show my location</button></p>
    <div id="out"></div>
    <script>
    	var output = document.getElementById("out");
        function geoFindMe() {
            if (!navigator.geolocation) {
                output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
                return;
            }
            output.innerHTML = "<p>Locating…</p>";
            navigator.geolocation.getCurrentPosition(success, error);
        }
        function success(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';

            OneSignal.push(function() {
                OneSignal.sendTags({
                    latitude: latitude,
                    long: longitude
                });
            });

            var img = new Image();
            img.src = "https://maps.googleapis.com/maps/api/staticmap?center=" + latitude + "," + longitude + "&zoom=13&size=300x300&sensor=false";

            output.appendChild(img);
        }

        function error() {
            output.innerHTML = "Unable to retrieve your location";
        }
    </script>
<!-- END Tracking code -->
</body>