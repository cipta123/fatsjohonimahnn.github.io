<!DOCTYPE html>
<html>
<head>
  <title>iframe Example</title>
  <link rel="manifest" href="/manifest.json" />
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
  <script>
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
      OneSignal.init({
        appId: "3beb3078-e0f1-4629-af17-fde833b9f716",
        autoRegister: false,
        notifyButton: {
          enable: true,
        },
      });
    });
  </script>
</head>
<body>
  <h1>iframe example</h1>
  <p> This page can be used as an example for cheching a site's origin if the user is subscribed to OneSignal</p>
  <p> Use this iframe code on the origin in which you want to check for OneSignal subscription</p>
  <pre>
  <code>
    // addEventListener support for IE8
    function bindEvent(element, eventName, eventHandler) {
      if (element.addEventListener) {
        element.addEventListener(eventName, eventHandler, false);
      } else if (element.attachEvent) {
        element.attachEvent('on' + eventName, eventHandler);
      }
    }
    // Send a message to the parent
    var sendMessage = function (msg) {
      window.parent.postMessage(msg, '*');
    };

    bindEvent(window, 'load', function (e) {
      OneSignal.push(function() {
        OneSignal.isPushNotificationsEnabled(function(isEnabled) {
          sendMessage(isEnabled)   
        });
      });
    });
  </code>
  </pre>

  <script>
  //iframe code for sending a message the user is subscribe to github site
  // addEventListener support for IE8
  function bindEvent(element, eventName, eventHandler) {
    if (element.addEventListener) {
      element.addEventListener(eventName, eventHandler, false);
    } else if (element.attachEvent) {
      element.attachEvent('on' + eventName, eventHandler);
    }
  }
  // Send a message to the parent
  var sendMessage = function (msg) {
    // Make sure you are sending a string, and to stringify JSON
    window.parent.postMessage(msg, '*');
  };

  bindEvent(window, 'load', function (e) {
    OneSignal.push(function() {
      OneSignal.isPushNotificationsEnabled(function(isEnabled) {
        sendMessage(isEnabled)   
      });
    });
  });
  </script>


</body>
</html>